var Hui=Hui||{};!function(t){"use strict";function e(e){e=a(e)||{},e.nodeType&&(e={element:e});var i=a(e.element)||u;if(1!==i.nodeType)throw new Error("posObject.element is invalid.");var n={element:i,x:e.x||0,y:e.y||0},s=i===u||"VIEWPORT"===i._id;return n.offset=function(){return c?{left:0,top:0}:s?{left:t(document).scrollLeft(),top:t(document).scrollTop()}:l(t(i)[0])},n.size=function(){var e=t(s?window:i);return{width:e.outerWidth(),height:e.outerHeight()}},n}function i(t){t.x=n(t.x,t,"width"),t.y=n(t.y,t,"height")}function n(t,e,i){if(t+="",t=t.replace(/px/gi,""),/\D/.test(t)&&(t=t.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==t.indexOf("%")&&(t=t.replace(/(\d+(?:\.\d+)?)%/gi,function(t,n){return e.size()[i]*(n/100)})),/[+\-*\/]/.test(t))try{t=new Function("return "+t)()}catch(n){throw new Error("Invalid position value: "+t)}return r(t)}function s(e){var i=e.offsetParent();i[0]===document.documentElement&&(i=t(document.body)),f&&i.css("zoom",1);var n;return n=i[0]===document.body&&"static"===i.css("position")?{top:0,left:0}:l(i[0]),n.top+=r(i.css("border-top-width")),n.left+=r(i.css("border-left-width")),n}function r(t){return parseFloat(t,10)||0}function a(e){return t(e)[0]}function l(t){var e=t.getBoundingClientRect(),i=document.documentElement;return{left:e.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||document.body.clientTop||0)}}var o=Hui.Position={},u={_id:"VIEWPORT",nodeType:1},c=!1,h=(window.navigator.userAgent||"").toLowerCase(),f=-1!==h.indexOf("msie 6");o.pin=function(n,r){if(n=e(n),r=e(r),n.element!==u&&"VIEWPORT"!==n.element._id){var a=t(n.element);"fixed"!==a.css("position")||f?(a.css("position","absolute"),c=!1):c=!0,i(n),i(r);var l=s(a),o=r.offset(),h=o.top+r.y-n.y-l.top,g=o.left+r.x-n.x-l.left;a.css({left:g,top:h})}},o.center=function(t,e){o.pin({element:t,x:"50%",y:"50%"},{element:e,x:"50%",y:"50%"})},o.VIEWPORT=u}(jQuery);var Hui=Hui||{};!function(t){"use strict";function e(e){this.target=t(e).eq(0)}function i(){}function n(e){var i={display:"none",border:"none",opacity:0,position:"absolute"},n=e.css("zIndex");return n&&n>0&&(i.zIndex=n-1),t("<iframe>",{src:"javascript:''",frameborder:0,css:i}).insertBefore(e)}var s=Hui.Position,r=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6");e.prototype.sync=function(){var t=this.target,e=this.iframe;if(!t.length)return this;var i=t.outerHeight(),r=t.outerWidth();return i&&r&&!t.is(":hidden")?(e||(e=this.iframe=n(t)),e.css({height:i,width:r}),s.pin(e[0],t[0]),e.show()):e&&e.hide(),this},e.prototype.destroy=function(){this.iframe&&(this.iframe.remove(),delete this.iframe),delete this.target},r?Hui.Shim=e:(i.prototype.sync=function(){return this},i.prototype.destroy=i,Hui.Shim=i)}(jQuery);var Hui=Hui||{};Hui.Messenger=function(){"use strict";function t(t,e){var i="";if(arguments.length<2?i="target error - target and name are both required":"object"!=typeof t?i="target error - target itself must be window object":"string"!=typeof e&&(i="target error - target name must be string type"),i)throw new Error(i);this.target=t,this.name=e}function e(t,e){this.targets={},this.name=t,this.listenFunc=[],i=e||i,this.initListen()}var i="arale-messenger",n="postMessage"in window;return n?t.prototype.send=function(t){this.target.postMessage(i+t,"*")}:t.prototype.send=function(t){var e=window.navigator[i+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(i+t,window)},e.prototype.addTarget=function(e,i){var n=new t(e,i);this.targets[i]=n},e.prototype.initListen=function(){var t=this,e=function(e){"object"==typeof e&&e.data&&(e=e.data),e=e.slice(i.length);for(var n=0;n<t.listenFunc.length;n++)t.listenFunc[n](e)};n?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[i+this.name]=e},e.prototype.listen=function(t){this.listenFunc.push(t)},e.prototype.clear=function(){this.listenFunc=[]},e.prototype.send=function(t){var e,i=this.targets;for(e in i)i.hasOwnProperty(e)&&i[e].send(t)},e}();var Hui=Hui||{};!function(t,e){"use strict";function i(e){return a(e)?null:t(s(e))}function n(t,e){if(t){var i;if(e){if(i=t.find(e),0===i.length)throw new Error("Invalid template selector: "+e)}else i=t;return r(i.html())}}function s(t){return t.replace(/({[^}]+}})/g,"<!--$1-->").replace(/\s(src|href)\s*=\s*(['"])(.*?\{.+?)\2/g," data-templatable-$1=$2$3$2")}function r(t){return t.replace(/(?:<|&lt;)!--({{[^}]+}})--(?:>|&gt;)/g,"$1").replace(/data-templatable-/gi,"")}function a(t){return"function"==typeof t}function l(t){if(!t)return{};var i={};for(var n in t){var s=t[n];i[n]=a(s)?s:e.compile(s)}return i}var o={};Hui.Templatable={templateHelpers:null,templatePartials:null,templateObject:null,parseElementFromTemplate:function(){var e,n=this.get("template");/^#/.test(n)&&(e=document.getElementById(n.substring(1)))&&(n=e.innerHTML,this.set("template",n)),this.templateObject=i(n),this.element=t(this.compile())},compile:function(t,i){if(t||(t=this.get("template")),i||(i=this.get("model"))||(i={}),i.toJSON&&(i=i.toJSON()),a(t))return t(i,{helpers:this.templateHelpers,partials:l(this.templatePartials)});var n,s,r=this.templateHelpers,u=this.templatePartials;if(r)for(n in r)r.hasOwnProperty(n)&&e.registerHelper(n,r[n]);if(u)for(s in u)u.hasOwnProperty(s)&&e.registerPartial(s,u[s]);var c=o[t];c||(c=o[t]=e.compile(t));var h=c(i);if(r)for(n in r)r.hasOwnProperty(n)&&delete e.helpers[n];if(u)for(s in u)u.hasOwnProperty(s)&&delete e.partials[s];return h},renderPartial:function(e){if(this.templateObject){var i=n(this.templateObject,e);i?e?this.$(e).html(this.compile(i)):this.element.html(this.compile(i)):this.element.html(this.compile())}else{var s=t(this.compile()),r=s.find(e);r.length?this.$(e).html(r.html()):this.element.html(s.html())}return this}};var u=e.compile;e.compile=function(t){return a(t)?t:u.call(e,t)}}(jQuery,Handlebars);var Hui=Hui||{};!function(t){function e(e){return t.contains(document.documentElement,e)}function i(e){t(l.blurOverlays).each(function(i,n){if(n&&n.get("visible")){for(var s=0;s<n._relativeElements.length;s++){var r=t(n._relativeElements[s])[0];if(r===e.target||t.contains(r,e.target))return}n.hide()}})}function n(t,e){for(var i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),e}var s=Hui.Position,r=Hui.Shim,a=Hui.Widget,l=a.extend({attrs:{width:null,height:null,zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:s.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var t=this;this._setupShim(),this._setupResize(),this.after("render",function(){var t=this.element.css("position");("static"===t||"relative"===t)&&this.element.css({position:"absolute",left:"-9999px",top:"-9999px"})}),this.after("show",function(){t._setPosition()})},destroy:function(){return n(this,l.allOverlays),n(this,l.blurOverlays),l.superclass.destroy.call(this)},_setPosition:function(t){if(e(this.element[0])&&(t||(t=this.get("align")),t)){var i="none"===this.element.css("display");return i&&this.element.css({visibility:"hidden",display:"block"}),s.pin({element:this.element,x:t.selfXY[0],y:t.selfXY[1]},{element:t.baseElement,x:t.baseXY[0],y:t.baseXY[1]}),i&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var t=new r(this.element);this.after("hide _setPosition",t.sync,t);var e=["width","height"];for(var i in e)e.hasOwnProperty(i)&&this.on("change:"+i,t.sync,t);this.before("destroy",t.destroy,t)},_setupResize:function(){l.allOverlays.push(this)},_blurHide:function(e){e=t.makeArray(e),e.push(this.element),this._relativeElements=e,l.blurOverlays.push(this)},_onRenderWidth:function(t){this.element.css("width",t)},_onRenderHeight:function(t){this.element.css("height",t)},_onRenderZIndex:function(t){this.element.css("zIndex",t)},_onRenderAlign:function(t){this._setPosition(t)},_onRenderVisible:function(t){this.element[t?"show":"hide"]()}});l.blurOverlays=[],t(document).on("click",function(t){i(t)});var o,u=t(window).width(),c=t(window).height();l.allOverlays=[],t(window).resize(function(){o&&clearTimeout(o),o=setTimeout(function(){var e=t(window).width(),i=t(window).height();(u!==e||c!==i)&&t(l.allOverlays).each(function(t,e){e&&e.get("visible")&&e._setPosition()}),u=e,c=i},80)}),Hui.Overlay=l}(jQuery);var Hui=Hui||{};!function(t){"use strict";var e=Hui.Overlay,i=(window.navigator.userAgent||"").toLowerCase(),n=-1!==i.indexOf("msie 6"),s=t(document.body),r=t(document),a=e.extend({attrs:{width:n?r.outerWidth(!0):"100%",height:n?r.outerHeight(!0):"100%",className:"ui-mask",opacity:.2,backgroundColor:"#000",style:{position:n?"absolute":"fixed",top:0,left:0},align:{baseElement:n?s:void 0}},show:function(){return n&&(this.set("width",r.outerWidth(!0)),this.set("height",r.outerHeight(!0))),a.superclass.show.call(this)},_onRenderBackgroundColor:function(t){this.element.css("backgroundColor",t)},_onRenderOpacity:function(t){this.element.css("opacity",t)}});Hui.Overlay.Mask=new a}(jQuery);var Hui=Hui||{};!function(t){"use strict";function e(t,e,i,n,s){var r=n&&n[0];s.delegateEvents(r?n:e,r?t+" "+e.selector:t,function(t){i.call(t.currentTarget,t)})}var i=Hui.Overlay,n=i.extend({attrs:{trigger:{value:null,getter:function(e){return t(e)}},triggerType:"hover",delegateNode:{value:null,getter:function(e){return t(e)}},align:{value:{baseXY:[0,"100%"],selfXY:[0,0]},setter:function(t){return t?(t.baseElement?this._specifiedBaseElement=!0:this.activeTrigger&&(t.baseElement=this.activeTrigger),t):void 0},getter:function(e){return t.extend({},e,this._specifiedBaseElement?{}:{baseElement:this.activeTrigger})}},delay:70,disabled:!1,effect:"",duration:250},setup:function(){n.superclass.setup.call(this),this._bindTrigger(),this._blurHide(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0);var t=this;this.get("delegateNode")&&this.before("show",function(){t._relativeElements=t.get("trigger"),t._relativeElements.push(t.element)})},render:function(){return n.superclass.render.call(this),this.element.hide(),this},show:function(){return this.get("disabled")?void 0:n.superclass.show.call(this)},hide:function(t){return t?this:n.superclass.hide.call(this)},_bindTrigger:function(){var t=this.get("triggerType");"click"===t?this._bindClick():"focus"===t?this._bindFocus():this._bindHover()},_bindClick:function(){function i(e){n.get("disabled")||n.get("trigger").each(function(i,s){e==s?(s._active=!0,n.activeTrigger=t(s)):s._active=!1})}var n=this;e("click",this.get("trigger"),function(t){this._active===!0?n.hide():(i(this),n.show())},this.get("delegateNode"),this),this.before("hide",function(){i()})},_bindFocus:function(){var i=this;e("focus",this.get("trigger"),function(){i.activeTrigger=t(this),i.show()},this.get("delegateNode"),this),e("blur",this.get("trigger"),function(){setTimeout(function(){!i._downOnElement&&i.hide(),i._downOnElement=!1},i.get("delay"))},this.get("delegateNode"),this),this.delegateEvents("mousedown",function(t){this._downOnElement=!0})},_bindHover:function(){function i(t){clearTimeout(n),n=null,o.get("visible")&&(s=setTimeout(function(){o.hide()},l))}var n,s,r=this.get("trigger"),a=this.get("delegateNode"),l=this.get("delay"),o=this;return 0>l?void this._bindTooltip():(e("mouseenter",r,function(){clearTimeout(s),s=null,o.activeTrigger=t(this),n=setTimeout(function(){o.show()},l)},a,this),e("mouseleave",r,i,a,this),this.delegateEvents("mouseenter",function(){clearTimeout(s)}),this.delegateEvents("mouseleave",i),void this.element.on("mouseleave","select",function(t){t.stopPropagation()}))},_bindTooltip:function(){var i=this.get("trigger"),n=this.get("delegateNode"),s=this;e("mouseenter",i,function(){s.activeTrigger=t(this),s.show()},n,this),e("mouseleave",i,function(){s.hide()},n,this)},_onRenderVisible:function(t,e){if(t!==!!e){var i=-1!==this.get("effect").indexOf("fade"),n=-1!==this.get("effect").indexOf("slide"),s={};n&&(s.height=t?"show":"hide"),i&&(s.opacity=t?"show":"hide");var r=this,a=t?function(){r.trigger("animated")}:function(){r.hide(!0),r.trigger("animated")};i||n?this.element.stop(!0,!0).animate(s,this.get("duration"),a).css({visibility:"visible"}):this.element[t?"show":"hide"]()}}});Hui.Popup=n}(jQuery);var Hui=Hui||{};!function(t){"use strict";function e(t){null==t.attr("tabindex")&&t.attr("tabindex","-1")}function i(t){var e=t[0].contentWindow.document;return e.body.scrollHeight&&e.documentElement.scrollHeight?Math.min(e.body.scrollHeight,e.documentElement.scrollHeight):e.documentElement.scrollHeight?e.documentElement.scrollHeight:e.body.scrollHeight?e.body.scrollHeight:void 0}function n(t){var e=!1;try{t[0].contentWindow.document}catch(i){e=!0}return e}function s(t,e){for(var i=-1,n=0;n<e.length;n++)if(e[n]===t){i=n;break}-1!==i&&e.splice(i,1)}var r=Hui.Overlay,a=Hui.Overlay.Mask,l=Hui.Events,o=Hui.Templatable,u=Hui.Messenger,c=r.extend({Implements:o,attrs:{template:'<div class="{{classPrefix}}">                  <a class="{{classPrefix}}-close" title="Close" href="javascript:;" data-role="close"></a>                  <div class="{{classPrefix}}-content" data-role="content"></div>                </div>',trigger:{value:null,getter:function(e){return t(e)}},classPrefix:"ui-dialog",content:{value:null,setter:function(t){return/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(t)&&(this._type="iframe",(t.indexOf("?ajax")>0||t.indexOf("&ajax")>0)&&(this._ajax=!0)),t}},hasMask:!0,closeTpl:"×",width:500,height:null,initialHeight:300,effect:"none",zIndex:999,autoFit:!0,align:{value:{selfXY:["50%","50%"],baseXY:["50%","42%"]},getter:function(e){return this.element.height()>.84*t(window).height()?{selfXY:["50%","0"],baseXY:["50%","0"]}:e}}},parseElement:function(){this.set("model",{classPrefix:this.get("classPrefix")}),c.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.contentElement.css({height:"100%",zoom:1}),this.$(">[data-role=close]").hide()},events:{"click [data-role=close]":function(t){t.preventDefault(),this.hide()}},show:function(){return"iframe"===this._type&&(this._ajax?this._ajaxHtml():(!this.get("height")&&this.contentElement.css("height",this.get("initialHeight")),this._showIframe())),c.superclass.show.call(this),this},hide:function(){return"iframe"===this._type&&this.iframe&&(this._isCrossDomainIframe||this.iframe.attr({src:"javascript:'';"}),this.iframe.remove(),this.iframe=null),c.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.element.remove(),this._hideMask(),clearInterval(this._interval),c.superclass.destroy.call(this)},setup:function(){c.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),e(this.element),e(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},_onRenderContent:function(e){if("iframe"!==this._type){var i;try{i=t(e)}catch(n){i=[]}i[0]?this.contentElement.empty().append(i):this.contentElement.empty().html(e),this._setPosition()}},_onRenderCloseTpl:function(t){""===t?this.$(">[data-role=close]").html(t).hide():this.$(">[data-role=close]").html(t).show()},_onRenderVisible:function(t){t?"fade"===this.get("effect")?this.element.fadeIn(300):this.element.show():this.element.hide()},_setupTrigger:function(){this.delegateEvents(this.get("trigger"),"click",function(e){e.preventDefault(),this.activeTrigger=t(e.currentTarget),this.show()})},_setupMask:function(){var t=this;a._dialogs=a._dialogs||[],this.after("show",function(){if(this.get("hasMask")){a.set("zIndex",t.get("zIndex")).show(),a.element.insertBefore(t.element);for(var e,i=0;i<a._dialogs.length;i++)a._dialogs[i]===t&&(e=a._dialogs[i]);e?(s(e,a._dialogs),a._dialogs.push(e)):a._dialogs.push(t)}}),this.after("hide",this._hideMask)},_hideMask:function(){if(this.get("hasMask"))for(var t=a._dialogs?a._dialogs.length:0,e=0;t>e;e++)if(a._dialogs[e]===this)if(s(this,a._dialogs),0===a._dialogs.length)a.hide();else if(e===t-1){var i=a._dialogs[a._dialogs.length-1];a.set("zIndex",i.get("zIndex")),a.element.insertBefore(i.element)}},_setupFocus:function(){this.after("show",function(){this.element.focus()}),this.after("hide",function(){this.activeTrigger&&this.activeTrigger.focus()})},_setupKeyEvents:function(){this.delegateEvents(t(document),"keyup.esc",function(t){27===t.keyCode&&this.get("visible")&&this.hide()})},_showIframe:function(){var t=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){t.get("visible")&&(t._isCrossDomainIframe=n(t.iframe),t._isCrossDomainIframe||(t.get("autoFit")&&(clearInterval(t._interval),t._interval=setInterval(function(){t._syncHeight()},300)),t._syncHeight()),t._setPosition(),t.trigger("complete:show"))})},_fixUrl:function(){var t=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return t.shift(),t[1]=(t[1]&&"?"!==t[1]?t[1]+"&":"?")+"t="+(new Date).getTime(),t.join("")},_createIframe:function(){var e=this;this.iframe=t("<iframe>",{src:"javascript:'';",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),l.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){e.hide()});var i=new u("parent","arale-dialog");this.iframe.one("load",function(){i.addTarget(e.iframe[0].contentWindow,"iframe1"),i.listen(function(t){switch(t=JSON.parse(t),t.event){case"close":e.hide();break;case"syncHeight":e._setHeight("px"===t.height.toString().slice(-2)?t.height:t.height+"px")}})})},_setHeight:function(t){this.contentElement.css("height",t),this.element[0].className=this.element[0].className},_syncHeight:function(){var t;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{this._errCount=0,t=i(this.iframe)+"px"}catch(e){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(t=this.get("initialHeight"),clearInterval(this._interval),delete this._interval)}this._setHeight(t)}},_ajaxHtml:function(){var t=this;this.contentElement.css("height",this.get("initialHeight")),this.contentElement.load(this.get("content"),function(){t._setPosition(),t.contentElement.css("height",""),t.trigger("complete:show")})}});Hui.Dialog=c}(jQuery);var Hui=Hui||{};!function(t){"use strict";var e=Hui.Dialog,i='{{#if title}}                  <div class="{{classPrefix}}-title" data-role="title">{{{title}}}</div>                  {{/if}}                  <div class="{{classPrefix}}-container">                      <div class="{{classPrefix}}-message" data-role="message">{{{message}}}</div>                      {{#if hasFoot}}                      <div class="{{classPrefix}}-operation" data-role="foot">                          {{#if confirmTpl}}                          <div class="{{classPrefix}}-confirm" data-role="confirm">                              {{{confirmTpl}}}                          </div>                          {{/if}}                          {{#if cancelTpl}}                          <div class="{{classPrefix}}-cancel" data-role="cancel">                              {{{cancelTpl}}}                          </div>                          {{/if}}                      </div>                      {{/if}}                  </div>',n=e.extend({attrs:{title:"默认标题",confirmTpl:'<a class="ui-dialog-button-orange" href="javascript:;">确定</a>',cancelTpl:'<a class="ui-dialog-button-white" href="javascript:;">取消</a>',message:"默认内容"},setup:function(){n.superclass.setup.call(this);var t={classPrefix:this.get("classPrefix"),message:this.get("message"),title:this.get("title"),confirmTpl:this.get("confirmTpl"),cancelTpl:this.get("cancelTpl"),hasFoot:this.get("confirmTpl")||this.get("cancelTpl")};this.set("content",this.compile(i,t))},events:{"click [data-role=confirm]":function(t){t.preventDefault(),this.trigger("confirm")},"click [data-role=cancel]":function(t){t.preventDefault(),this.trigger("cancel"),this.hide()}},_onChangeMessage:function(t){this.$("[data-role=message]").html(t)},_onChangeTitle:function(t){this.$("[data-role=title]").html(t)},_onChangeConfirmTpl:function(t){this.$("[data-role=confirm]").html(t)},_onChangeCancelTpl:function(t){this.$("[data-role=cancel]").html(t)}});n.alert=function(e,i,s){var r={message:e,title:"",cancelTpl:"",closeTpl:"",onConfirm:function(){i&&i(),this.hide()}};new n(t.extend(null,r,s)).show().after("hide",function(){this.destroy()})},n.confirm=function(e,i,s,r,a){"object"!=typeof r||a||(a=r,r=null);var l={message:e,title:i||"确认框",closeTpl:"",onConfirm:function(){s&&s(),this.hide()},onCancel:function(){r&&r(),this.hide()}};new n(t.extend(null,l,a)).show().after("hide",function(){this.destroy()})},n.show=function(e,i,s){var r={message:e,title:"",confirmTpl:!1,cancelTpl:!1};new n(t.extend(null,r,s)).show().before("hide",function(){i&&i()}).after("hide",function(){this.destroy()})},Hui.Dialog.ConfirmBox=n}(jQuery),!function(t){"use strict";var e=Math.PI,i=Math.pow,n=Math.sin,s=1.70158,r={easeNone:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return(2-t)*t},easeBoth:function(t){return(t*=2)<1?.5*t*t:.5*(1- --t*(t-2))},easeInStrong:function(t){return t*t*t*t},easeOutStrong:function(t){return 1- --t*t*t*t},easeBothStrong:function(t){return(t*=2)<1?.5*t*t*t*t:.5*(2-(t-=2)*t*t*t)},backIn:function(t){return 1===t&&(t-=.001),t*t*((s+1)*t-s)},backOut:function(t){return(t-=1)*t*((s+1)*t+s)+1},backBoth:function(t){var e=s,i=(e*=1.525)+1;return(t*=2)<1?.5*(t*t*(i*t-e)):.5*((t-=2)*t*(i*t+e)+2)},elasticIn:function(t){var s=.3,r=s/4;return 0===t||1===t?t:-(i(2,10*(t-=1))*n((t-r)*(2*e)/s))},elasticOut:function(t){var s=.3,r=s/4;return 0===t||1===t?t:i(2,-10*t)*n((t-r)*(2*e)/s)+1},elasticBoth:function(t){var s=.45,r=s/4;return 0===t||2===(t*=2)?t:1>t?-.5*(i(2,10*(t-=1))*n((t-r)*(2*e)/s)):i(2,-10*(t-=1))*n((t-r)*(2*e)/s)*.5+1},bounceIn:function(t){return 1-r.bounceOut(1-t)},bounceOut:function(t){var e,i=7.5625;return e=1/2.75>t?i*t*t:2/2.75>t?i*(t-=1.5/2.75)*t+.75:2.5/2.75>t?i*(t-=2.25/2.75)*t+.9375:i*(t-=2.625/2.75)*t+.984375},bounceBoth:function(t){return.5>t?.5*r.bounceIn(2*t):.5*r.bounceOut(2*t-1)+.5}};Hui.Easing=r,t.extend(t.easing,r)}(jQuery),!function(t,e){"use strict";var i="scrollx",n="scrolly",s="fade";e.Effects={attrs:{effect:"none",easing:"linear",duration:500},isNeeded:function(){return"none"!==this.get("effect")},install:function(){var e=this.get("panels");e.show();var n=this.get("effect"),a=this.get("step"),l=t.isFunction(n);if(l||0!==n.indexOf("scroll")){if(!l&&n===s){var o=this.get("activeIndex"),u=o*a,c=u+a-1;e.each(function(e,i){var n=e>=u&&c>=e;t(i).css({opacity:n?1:0,position:"absolute",zIndex:n?9:1})})}}else{var h=this.content,f=e.eq(0);h.css("position","relative"),"static"===h.parent().css("position")&&h.parent().css("position","relative"),n===i&&(e.css("float","left"),h.width("35791197px"));var g=this.get("viewSize");if(g[0]||(g[0]=f.outerWidth()*a,g[1]=f.outerHeight()*a,this.set("viewSize",g)),!g[0])throw new Error("Please specify viewSize manually")}this._switchPanel=function(e){var i=this.get("effect"),n=t.isFunction(i)?i:r[i];n.call(this,e)}}};var r={fade:function(t){if(this.get("step")>1)throw new Error('Effect "fade" only supports step === 1');var e=t.fromPanels.eq(0),i=t.toPanels.eq(0);if(this.anim&&this.anim.stop(!1,!0),i.css("opacity",1),i.show(),t.fromIndex>-1){var n=this,s=this.get("duration"),r=this.get("easing");this.anim=e.animate({opacity:0},s,r,function(){n.anim=null,i.css("zIndex",9),e.css("zIndex",1),e.css("display","none")})}else i.css("zIndex",9)},scroll:function(t){var e=this.get("effect")===i,n=this.get("viewSize")[e?0:1]*t.toIndex,s={};if(s[e?"left":"top"]=-n+"px",this.anim&&this.anim.stop(),t.fromIndex>-1){var r=this,a=this.get("duration"),l=this.get("easing");this.anim=this.content.animate(s,a,l,function(){r.anim=null})}else this.content.css(s)}};r[n]=r.scroll,r[i]=r.scroll,e.Effects.Effects=r}(jQuery,Hui.Plugins=Hui.Plugins||{}),!function(t,e){"use strict";function i(t,e){function i(){i.stop(),n=setTimeout(t,e)}e=e||200;var n;return i.stop=function(){n&&(clearTimeout(n),n=0)},i}function n(t){var e=s.scrollTop(),i=e+s.height(),n=t.offset().top,r=n+t.height();return i>n&&r>e}var s=t(window);e.Autoplay={attrs:{autoplay:!1,interval:5e3},isNeeded:function(){return this.get("autoplay")},install:function(){function t(){e(),u.paused=!1,r=setInterval(function(){u.paused||u.next()},o)}function e(){r&&(clearInterval(r),r=null),u.paused=!0}var r,a=this.element,l="."+this.cid,o=this.get("interval"),u=this;t(),this.stop=e,this.start=t,this._scrollDetect=i(function(){u[n(a)?"start":"stop"]()}),s.on("scroll"+l,this._scrollDetect),this.element.hover(e,t)},destroy:function(){var t="."+this.cid;this.stop&&this.stop(),this._scrollDetect&&(this._scrollDetect.stop(),s.off("scroll"+t))}}}(jQuery,Hui.Plugins=Hui.Plugins||{}),!function(t,e){"use strict";function i(e,i,n){var s=this.get("step"),r=this.get("length"),a=e?r-1:0,l=a*s,o=(a+1)*s,u=e?n:-n*r,c=e?-n*r:n*r,h=t(this.get("panels").get().slice(l,o));return h.css("position","relative"),h.css(i,c+"px"),u}function n(e,i,n){var s=this.get("step"),r=this.get("length"),a=e?r-1:0,l=a*s,o=(a+1)*s,u=t(this.get("panels").get().slice(l,o));u.css("position",""),u.css(i,""),this.content.css(i,e?-n*(r-1):"")}var s="scrollx",r="scrolly",a=e.Effects.Effects;e.Circular={isNeeded:function(){var t=this.get("effect"),e=this.get("circular");return e&&(t===s||t===r)},install:function(){this._scrollType=this.get("effect"),this.set("effect","scrollCircular")}},a.scrollCircular=function(t){var e=t.toIndex,r=t.fromIndex,a=this._scrollType===s,l=a?"left":"top",o=this.get("viewSize")[a?0:1],u=-o*e,c={};if(c[l]=u+"px",r>-1){this.anim&&this.anim.stop(!1,!0);var h=this.get("length"),f=0===r&&e===h-1,g=r===h-1&&0===e,d=void 0===this._isBackward?r>e:this._isBackward,p=d&&f||!d&&g;p&&(u=i.call(this,d,l,o),c[l]=u+"px");var m=this.get("duration"),v=this.get("easing"),y=this;this.anim=this.content.animate(c,m,v,function(){y.anim=null,p&&n.call(y,d,l,o)})}else this.content.css(c)}}(jQuery,Hui.Plugins=Hui.Plugins||{});var Hui=Hui||{};!function(t){"use strict";function e(e,i,n,s){for(var r=t("<ul>"),a=0;e>a;a++){var l=a===i?n:"";t("<li>",{"class":l,html:a+1}).appendTo(r)}return s?r.children():r}function i(t){return{UI_SWITCHABLE:t||"",NAV_CLASS:t?t+"-nav":"",CONTENT_CLASS:t?t+"-content":"",TRIGGER_CLASS:t?t+"-trigger":"",PANEL_CLASS:t?t+"-panel":"",PREV_BTN_CLASS:t?t+"-prev-btn":"",NEXT_BTN_CLASS:t?t+"-next-btn":""}}var n=Hui.Widget,s=Hui.Plugins.Effects,r=Hui.Plugins.Autoplay,a=Hui.Plugins.Circular,l=n.extend({attrs:{triggers:{value:[],getter:function(e){return t(e)}},panels:{value:[],getter:function(e){return t(e)}},classPrefix:"ui-switchable",hasTriggers:!0,triggerType:"hover",delay:100,activeIndex:{value:0,setter:function(t){return parseInt(t)||0}},step:1,length:{readOnly:!0,getter:function(){return Math.ceil(this.get("panels").length/this.get("step"))}},viewSize:[],activeTriggerClass:{getter:function(t){return t?t:this.get("classPrefix")+"-active"}}},setup:function(){this._initConstClass(),this._initElement();var t=this._getDatasetRole();this._initPanels(t),this._initTriggers(t),this._bindTriggers(),this._initPlugins(),this.render()},_initConstClass:function(){this.CONST=i(this.get("classPrefix"))},_initElement:function(){this.element.addClass(this.CONST.UI_SWITCHABLE)},_getDatasetRole:function(){var e=this,i={},n=["trigger","panel","nav","content"];return t.each(n,function(t,n){var s=e.$("[data-role="+n+"]");s.length&&(i[n]=s)}),i},_initPanels:function(t){var e=this.get("panels");if(e.length>0||(t.panel?this.set("panels",e=t.panel):t.content&&(this.set("panels",e=t.content.find("> *")),this.content=t.content)),0===e.length)throw new Error("panels.length is ZERO");this.content||(this.content=e.parent()),this.content.addClass(this.CONST.CONTENT_CLASS),this.get("panels").addClass(this.CONST.PANEL_CLASS)},_initTriggers:function(i){var n=this.get("triggers");n.length>0||(i.trigger?this.set("triggers",n=i.trigger):i.nav?(n=i.nav.find("> *"),0===n.length&&(n=e(this.get("length"),this.get("activeIndex"),this.get("activeTriggerClass"),!0).appendTo(i.nav)),this.set("triggers",n),this.nav=i.nav):this.get("hasTriggers")&&(this.nav=e(this.get("length"),this.get("activeIndex"),this.get("activeTriggerClass")).appendTo(this.element),this.set("triggers",n=this.nav.children()))),!this.nav&&n.length&&(this.nav=n.parent()),this.nav&&this.nav.addClass(this.CONST.NAV_CLASS),n.addClass(this.CONST.TRIGGER_CLASS).each(function(e,i){t(i).data("value",e)})},_bindTriggers:function(){function e(e){n._onFocusTrigger(e.type,t(this).data("value"))}function i(){clearTimeout(n._switchTimer)}var n=this,s=this.get("triggers");"click"===this.get("triggerType")?s.click(e):s.hover(e,i)},_onFocusTrigger:function(t,e){var i=this;"click"===t?this.switchTo(e):this._switchTimer=setTimeout(function(){i.switchTo(e)},this.get("delay"))},_initPlugins:function(){this._plugins=[],this._plug(s),this._plug(r),this._plug(a)},switchTo:function(t){this.set("activeIndex",t)},_onRenderActiveIndex:function(t,e){this._switchTo(t,e)},_switchTo:function(t,e){this.trigger("switch",t,e),this._switchTrigger(t,e),this._switchPanel(this._getPanelInfo(t,e)),this.trigger("switched",t,e),this._isBackward=void 0},_switchTrigger:function(t,e){var i=this.get("triggers");i.length<1||(i.eq(e).removeClass(this.get("activeTriggerClass")),i.eq(t).addClass(this.get("activeTriggerClass")))},_switchPanel:function(t){t.fromPanels.hide(),t.toPanels.show()},_getPanelInfo:function(e,i){var n,s,r=this.get("panels").get(),a=this.get("step");return i>-1&&(n=r.slice(i*a,(i+1)*a)),s=r.slice(e*a,(e+1)*a),{toIndex:e,fromIndex:i,toPanels:t(s),fromPanels:t(n)}},prev:function(){this._isBackward=!0;var t=this.get("activeIndex"),e=(t-1+this.get("length"))%this.get("length");this.switchTo(e)},next:function(){this._isBackward=!1;var t=this.get("activeIndex"),e=(t+1)%this.get("length");this.switchTo(e)},_plug:function(t){var e=t.attrs;if(e)for(var i in e)!e.hasOwnProperty(i)||i in this.attrs||this.set(i,e[i]);t.isNeeded.call(this)&&(t.install&&t.install.call(this),this._plugins.push(t))},destroy:function(){var e=this;t.each(this._plugins,function(t,i){i.destroy&&i.destroy.call(e)}),l.superclass.destroy.call(this)}});Hui.Switchable=l}(jQuery),Hui.Switchable.Tabs=Hui.Switchable.extend({}),Hui.Switchable.Slide=Hui.Switchable.extend({attrs:{autoplay:!0,circular:!0}}),!function(t){"use strict";var e=Hui.Switchable;Hui.Switchable.Carousel=e.extend({attrs:{circular:!0,prevBtn:{getter:function(e){return t(e).eq(0)}},nextBtn:{getter:function(e){return t(e).eq(0)}},disabledBtnClass:{getter:function(t){return t?t:this.get("classPrefix")+"-disabled-btn"}}},_initTriggers:function(t){e.prototype._initTriggers.call(this,t);var i=this.get("prevBtn"),n=this.get("nextBtn");!i[0]&&t.prev&&(i=t.prev,this.set("prevBtn",i)),!n[0]&&t.next&&(n=t.next,this.set("nextBtn",n)),i.addClass(this.CONST.PREV_BTN_CLASS),n.addClass(this.CONST.NEXT_BTN_CLASS)},_getDatasetRole:function(){var i=e.prototype._getDatasetRole.call(this),n=this,s=["next","prev"];return t.each(s,function(t,e){var s=n.$("[data-role="+e+"]");s.length&&(i[e]=s)}),i},_bindTriggers:function(){e.prototype._bindTriggers.call(this);var t=this,i=this.get("circular");this.get("prevBtn").click(function(e){e.preventDefault(),(i||t.get("activeIndex")>0)&&t.prev()}),this.get("nextBtn").click(function(e){e.preventDefault();var n=t.get("length")-1;(i||t.get("activeIndex")<n)&&t.next()}),i||this.on("switch",function(e){t._updateButtonStatus(e)})},_updateButtonStatus:function(t){var e=this.get("prevBtn"),i=this.get("nextBtn"),n=this.get("disabledBtnClass");e.removeClass(n),i.removeClass(n),0===t?e.addClass(n):t===this.get("length")-1&&i.addClass(n)}})}(jQuery),!function(t){"use strict";var e=t.Switchable,i=e.extend({
attrs:{triggerType:"click",multiple:!1,autoplay:!1},switchTo:function(t){this.get("multiple")?this._switchTo(t,t):e.prototype.switchTo.call(this,t)},_switchTrigger:function(t,i){this.get("multiple")?this.get("triggers").eq(t).toggleClass(this.get("activeTriggerClass")):e.prototype._switchTrigger.call(this,t,i)},_switchPanel:function(t){this.get("multiple")?t.toPanels.toggle():e.prototype._switchPanel.call(this,t)}});t.Switchable.Accordion=i}(Hui),!function(t){"use strict";var e={};t.Async=e;var i=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i+=1)e(t[i],i,t)},n=function(t,e){if(t.map)return t.map(e);var n=[];return i(t,function(t,i,s){n.push(e(t,i,s))}),n},s=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};e.forEach=function(t,e,n){if(n=n||function(){},!t.length)return n();var s=0;i(t,function(i){e(i,function(e){e?(n(e),n=function(){}):(s+=1,s===t.length&&n(null))})})},e.forEachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var n=0,s=function(){e(t[n],function(e){e?(i(e),i=function(){}):(n+=1,n===t.length?i(null):s())})};s()};var r=function(t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[e.forEach].concat(i))}},a=function(t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[e.forEachSeries].concat(i))}},l=function(t,e,i,s){var r=[];e=n(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i,n){r[t.index]=n,e(i)})},function(t){s(t,r)})};e.map=r(l),e.mapSeries=a(l),e.series=function(t,i){if(i=i||function(){},t.constructor===Array)e.mapSeries(t,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)})},i);else{var n={};e.forEachSeries(s(t),function(e,i){t[e](function(t){var s=Array.prototype.slice.call(arguments,1);s.length<=1&&(s=s[0]),n[e]=s,i(t)})},function(t){i(t,n)})}}}(Hui.Validation=Hui.Validation||{}),!function(t,e){function i(e,i){var n=this;if(n.name=e,i instanceof RegExp)n.operator=function(e,n){var r=i.test(t(e.element).val());n(r?null:e.rule,s(e,r))};else{if(!t.isFunction(i))throw new Error("The second argument must be a regexp or a function.");n.operator=function(t,e){var n=i.call(this,t,function(i,n){e(i?null:t.rule,n||s(t,i))});void 0!==n&&e(n?null:t.rule,s(t,n))}}}function n(e,s,a){return t.isPlainObject(e)?(t.each(e,function(e,i){t.isArray(i)?n(e,i[0],i[1]):n(e,i)}),this):(s instanceof i?o[e]=new i(e,s.operator):o[e]=new i(e,s),r(e,a),this)}function s(e,i){var n,s=e.rule;return e.message?t.isPlainObject(e.message)?(n=e.message[i?"success":"failure"],"undefined"==typeof n&&(n=u[s][i?"success":"failure"])):n=i?"":e.message:n=u[s][i?"success":"failure"],n?l(e,n):n}function r(e,i){return t.isPlainObject(e)?(t.each(e,function(t,e){r(t,e)}),this):(t.isPlainObject(i)?u[e]=i:u[e]={failure:i},this)}function a(e,n){if(n){var s=o[e];return new i(null,function(e,i){s.operator(t.extend(null,e,n),i)})}return o[e]}function l(e,i){var n=i,s=/\{\{[^\{\}]*\}\}/g,r=/\{\{(.*)\}\}/,a=i.match(s);return a&&t.each(a,function(i,s){var a=s.match(r)[1],l=e[t.trim(a)];n=n.replace(s,l)}),n}var o={},u={};i.prototype.and=function(t,e){var n=t instanceof i?t:a(t,e);if(!n)throw new Error('No rule with name "'+t+'" found.');var r=this,l=function(t,e){r.operator.call(this,t,function(i,r){i?e(i,s(t,!i)):n.operator.call(this,t,e)})};return new i(null,l)},i.prototype.or=function(t,e){var n=t instanceof i?t:a(t,e);if(!n)throw new Error('No rule with name "'+t+'" found.');var r=this,l=function(t,e){r.operator.call(this,t,function(i,r){i?n.operator.call(this,t,e):e(null,s(t,!0))})};return new i(null,l)},i.prototype.not=function(t){var e=a(this.name,t),n=function(t,i){e.operator.call(this,t,function(e,n){e?i(null,s(t,!0)):i(!0,s(t,!1))})};return new i(null,n)},n("required",function(e){var i=t(e.element),n=i.attr("type");switch(n){case"checkbox":case"radio":var s=!1;return i.each(function(e,i){return t(i).prop("checked")?(s=!0,!1):void 0}),s;default:return Boolean(t.trim(i.val()))}},"请输入{{display}}"),n("email",/^\s*([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,20})\s*$/,"{{display}}的格式不正确"),n("text",/.*/),n("password",/.*/),n("radio",/.*/),n("checkbox",/.*/),n("url",/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,"{{display}}的格式不正确"),n("number",/^[+-]?[1-9][0-9]*(\.[0-9]+)?([eE][+-][1-9][0-9]*)?$|^[+-]?0?\.[0-9]+([eE][+-][1-9][0-9]*)?$|^0$/,"{{display}}的格式不正确"),n("digits",/^\s*\d+\s*$/,"{{display}}的格式不正确"),n("date",/^\d{4}\-[01]?\d\-[0-3]?\d$|^[01]\d\/[0-3]\d\/\d{4}$|^\d{4}年[01]?\d月[0-3]?\d[日号]$/,"{{display}}的格式不正确"),n("min",function(t){var e=t.element,i=t.min;return Number(e.val())>=Number(i)},"{{display}}必须大于或者等于{{min}}"),n("max",function(t){var e=t.element,i=t.max;return Number(e.val())<=Number(i)},"{{display}}必须小于或者等于{{max}}"),n("minlength",function(t){var e=t.element,i=e.val().length;return i>=Number(t.min)},"{{display}}的长度必须大于或等于{{min}}"),n("maxlength",function(t){var e=t.element,i=e.val().length;return i<=Number(t.max)},"{{display}}的长度必须小于或等于{{max}}"),n("mobile",/^1\d{10}$/,"请输入正确的{{display}}"),n("confirmation",function(e){var i=e.element,n=t(e.target);return i.val()==n.val()},"两次输入的{{display}}不一致，请重新输入"),e.Rule={addRule:n,setMessage:r,getMessage:function(t,e){return s(t,e)},getRule:a,getOperator:function(t){return o[t].operator}}}(jQuery,Hui.Validation=Hui.Validation||{}),!function($,Validation){function unique(){return"__anonymous__"+u_count++}function parseRules(t){return t?t.match(/[a-zA-Z0-9\-\_]+(\{[^\{\}]*\})?/g):null}function parseDom(t){var t=$(t),e={},i=[],n=t.attr("required");n&&(i.push("required"),e.required=!0);var s=t.attr("type");if(s&&"submit"!=s&&"cancel"!=s&&"checkbox"!=s&&"radio"!=s&&"select"!=s&&"select-one"!=s&&"file"!=s&&"hidden"!=s&&"textarea"!=s){if(!Rule.getRule(s))throw new Error('Form field with type "'+s+'" not supported!');i.push(s)}var r=t.attr("min");r&&i.push('min{"min":"'+r+'"}');var a=t.attr("max");a&&i.push("max{max:"+a+"}");var l=t.attr("minlength");l&&i.push("minlength{min:"+l+"}");var o=t.attr("maxlength");o&&i.push("maxlength{max:"+o+"}");var u=t.attr("pattern");if(u){var c=new RegExp(u),h=unique();Rule.addRule(h,c),i.push(h)}var f=t.attr("data-rule");return f=f&&parseRules(f),f&&(i=i.concat(f)),e.rule=0==i.length?null:i.join(" "),e}function parseJSON(str){function getValue(str){return'"'==str.charAt(0)&&'"'==str.charAt(str.length-1)||"'"==str.charAt(0)&&"'"==str.charAt(str.length-1)?eval(str):str}if(!str)return null;var NOTICE='Invalid option object "'+str+'".';str=str.slice(1,-1);var result={},arr=str.split(",");return $.each(arr,function(t,e){if(arr[t]=$.trim(e),!arr[t])throw new Error(NOTICE);var i=arr[t].split(":"),n=$.trim(i[0]),s=$.trim(i[1]);if(!n||!s)throw new Error(NOTICE);result[getValue(n)]=$.trim(getValue(s))}),result}function isHidden(t){var e=t[0].offsetWidth,i=t[0].offsetHeight,n="TR"===t.prop("tagName");return 0!==e||0!==i||n?0===e||0===i||n?"none"===t.css("display"):!1:!0}var Rule=Validation.Rule,u_count=0,helpers={};Validation.Utils={parseRule:function(t){var e=t.match(/([^{}:\s]*)(\{[^\{\}]*\})?/);return{name:e[1],param:parseJSON(e[2])}},parseRules:parseRules,parseDom:parseDom,isHidden:isHidden,helper:function(t,e){return e?(helpers[t]=e,this):helpers[t]}}}(jQuery,Hui.Validation=Hui.Validation||{}),!function(t,e){function i(t){return(" "+t+" ").indexOf(" required ")>=0}function n(e,i,n){var r=t.extend({},e,{element:n.element,display:e&&e.display||n.get("display"),rule:i}),a=n.get("errormessage"+s(i))||n.get("errormessage");return a&&!r.message&&(r.message={failure:a}),r}function s(t){return t+="",t.charAt(0).toUpperCase()+t.slice(1)}function r(e,i,s){var r=e.element;if(!e.get("required")){var l=!1,c=r.attr("type");switch(c){case"checkbox":case"radio":var h=!1;r.each(function(e,i){return t(i).prop("checked")?(h=!0,!1):void 0}),l=h;break;default:l=!!r.val()}if(!l)return void(s&&s(null,null))}if(!t.isArray(i))throw new Error("No validation rule specified or not specified as an array.");var f=[];t.each(i,function(t,i){var s=a.parseRule(i),r=s.name,l=s.param,o=u.getOperator(r);if(!o)throw new Error('Validation rule with name "'+r+'" cannot be found.');var c=n(l,r,e);f.push(function(t){o.call(e._validator,c,t)})}),o.series(f,function(t,e){s&&s(t,e[e.length-1])})}var a=e.Utils,l=Hui.Widget,o=e.Async,u=e.Rule,c={value:t.noop,setter:function(e){return t.isFunction(e)?e:a.helper(e)}},h=l.extend({attrs:{rule:{value:"",getter:function(e){return e=t.trim(e),this.get("required")?e&&i(e)||(e=t.trim("required "+e)):i(e)&&(e=t.trim((" "+e+" ").replace(" required "," "))),e}},display:null,displayHelper:null,triggerType:{getter:function(t){if(!t)return t;var e=this.element,i=e.attr("type"),n=e.is("select")||"radio"==i||"checkbox"==i;return n&&(t.indexOf("blur")>-1||t.indexOf("key")>-1)?"change":t}},required:{value:!1,getter:function(e){return t.isFunction(e)?e():e}},checkNull:!0,errormessage:null,onItemValidate:c,onItemValidated:c,showMessage:c,hideMessage:c},setup:function(){!this.get("display")&&t.isFunction(this.get("displayHelper"))&&this.set("display",this.get("displayHelper")(this))},execute:function(t,e){var i=this,n=!!i.element.attr("disabled");if(e=e||{},i.get("skipHidden")&&a.isHidden(i.element)||n)return t&&t(null,"",i.element),i;i.trigger("itemValidate",i.element,e.event);var s=a.parseRules(i.get("rule"));return s?r(i,s,function(n,s){i.trigger("itemValidated",n,s,i.element,e.event),t&&t(n,s,i.element)}):(i.trigger("itemValidated",null,"",i.element,e.event),t&&t(null,"",i.element)),i},getMessage:function(e,i,s){var r="",l=this,o=a.parseRules(l.get("rule"));return i=!!i,t.each(o,function(o,c){var h=a.parseRule(c),f=h.name,g=h.param;e===f&&(r=u.getMessage(t.extend(s||{},n(g,f,l)),i))}),r}});e.Item=h}(jQuery,Hui.Validation=Hui.Validation||{}),!function(t,e){function i(t,e){for(var i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),e}function n(e,i){var n;return t.each(i,function(t,i){return e.get(0)===i.element.get(0)?(n=i,!1):void 0}),n}var s=e.Async,r=Hui.Widget,a=e.Utils,l=e.Rule,o=e.Item,u=[],c={value:t.noop,setter:function(e){return t.isFunction(e)?e:a.helper(e)}},h=r.extend({attrs:{triggerType:"blur",checkOnSubmit:!0,stopOnError:!1,autoSubmit:!0,checkNull:!0,onItemValidate:c,onItemValidated:c,onFormValidate:c,onFormValidated:c,displayHelper:function(e){var i,n,s=e.element.attr("id");return s&&(i=t('label[for="'+s+'"]').text(),i&&(i=i.replace(/^[\*\s\:\：]*/,"").replace(/[\*\s\:\：]*$/,""))),n=e.element.attr("name"),i||n},showMessage:c,hideMessage:c,autoFocus:!0,failSilently:!1,skipHidden:!1},setup:function(){var t=this;if(t.items=[],t.element.is("form")){t._novalidate_old=t.element.attr("novalidate");try{t.element.attr("novalidate","novalidate")}catch(e){}t.get("checkOnSubmit")&&t.element.on("submit.validator",function(e){e.preventDefault(),t.execute(function(e){!e&&t.get("autoSubmit")&&t.element.get(0).submit()})})}t.on("itemValidated",function(t,e,i,n){this.query(i).get(t?"showMessage":"hideMessage").call(this,e,i,n)}),u.push(t)},Statics:t.extend({helper:a.helper},l,{autoRender:function(e){var i=new this(e);t("input, textarea, select",i.element).each(function(e,n){n=t(n);var s=n.attr("type");if("button"==s||"submit"==s||"reset"==s)return!0;var r={};if("radio"==s||"checkbox"==s?r.element=t("[type="+s+"][name="+n.attr("name")+"]",i.element):r.element=n,!i.query(r.element)){var l=a.parseDom(n);if(!l.rule)return!0;t.extend(r,l),i.addItem(r)}})},query:function(t){return r.query(t)},validate:function(e){var i=t(e.element),n=new h({element:i.parents()});n.addItem(e),n.query(i).execute(),n.destroy()}}),addItem:function(e){var i=this;if(t.isArray(e))return t.each(e,function(t,e){i.addItem(e)}),this;if(e=t.extend({triggerType:i.get("triggerType"),checkNull:i.get("checkNull"),displayHelper:i.get("displayHelper"),showMessage:i.get("showMessage"),hideMessage:i.get("hideMessage"),failSilently:i.get("failSilently"),skipHidden:i.get("skipHidden")},e),"string"==typeof e.element&&(e.element=this.$(e.element)),!t(e.element).length){if(e.failSilently)return i;throw new Error("element does not exist")}var n=new o(e);return i.items.push(n),n._validator=i,n.delegateEvents(n.get("triggerType"),function(t){(this.get("checkNull")||this.element.val())&&this.execute(null,{event:t})}),n.on("all",function(t){this.trigger.apply(this,[].slice.call(arguments))},i),i},removeItem:function(t){var e=this,n=t instanceof o?t:e.query(t);return n&&(n.get("hideMessage").call(e,null,n.element),i(n,e.items),n.destroy()),e},execute:function(e){var i=this,n=[],r=!1,a=null;return t.each(i.items,function(t,e){e.get("hideMessage").call(i,null,e.element)}),i.trigger("formValidate",i.element),s[i.get("stopOnError")?"forEachSeries":"forEach"](i.items,function(t,e){t.execute(function(t,s,l){t&&!r&&(r=!0,a=l),n.push([].slice.call(arguments,0)),e(i.get("stopOnError")?t:null)})},function(){i.get("autoFocus")&&r&&(i.trigger("autoFocus",a),a.focus()),i.trigger("formValidated",r,n,i.element),e&&e(r,n,i.element)}),i},destroy:function(){var t=this,e=t.items.length;if(t.element.is("form")){try{void 0==t._novalidate_old?t.element.removeAttr("novalidate"):t.element.attr("novalidate",t._novalidate_old)}catch(n){}t.element.off("submit.validator")}for(var s=e-1;s>=0;s--)t.removeItem(t.items[s]);i(t,u),h.superclass.destroy.call(this)},query:function(t){return n(this.$(t),this.items)}});e.Core=h}(jQuery,Hui.Validation=Hui.Validation||{}),!function(t){var e=Hui.Validation.Core,i=e.extend({events:{"mouseenter .{{attrs.inputClass}}":"mouseenter","mouseleave .{{attrs.inputClass}}":"mouseleave","mouseenter .{{attrs.textareaClass}}":"mouseenter","mouseleave .{{attrs.textareaClass}}":"mouseleave","focus .{{attrs.itemClass}} input,textarea,select":"focus","blur .{{attrs.itemClass}} input,textarea,select":"blur"},attrs:{explainClass:"ui-form-explain",itemClass:"ui-form-item",itemHoverClass:"ui-form-item-hover",itemFocusClass:"ui-form-item-focus",itemErrorClass:"ui-form-item-error",inputClass:"ui-input",textareaClass:"ui-textarea",showMessage:function(t,e){this.getExplain(e).html(t),this.getItem(e).addClass(this.get("itemErrorClass"))},hideMessage:function(t,e){this.getExplain(e).html(e.attr("data-explain")||" "),this.getItem(e).removeClass(this.get("itemErrorClass"))}},setup:function(){i.superclass.setup.call(this);var t=this;this.on("autoFocus",function(e){t.set("autoFocusEle",e)})},addItem:function(t){i.superclass.addItem.apply(this,[].slice.call(arguments));var e=this.query(t.element);return e&&this._saveExplainMessage(e),this},_saveExplainMessage:function(t){var e=t.element,i=e.attr("data-explain");void 0!==i||this.getItem(e).hasClass(this.get("itemErrorClass"))||e.attr("data-explain",this.getExplain(e).html())},getExplain:function(e){var i=this.getItem(e),n=i.find("."+this.get("explainClass"));return 0==n.length&&(n=t('<div class="'+this.get("explainClass")+'"></div>').appendTo(i)),n},getItem:function(e){e=t(e);var i=e.parents("."+this.get("itemClass"));return i},mouseenter:function(t){this.getItem(t.target).addClass(this.get("itemHoverClass"))},mouseleave:function(t){this.getItem(t.target).removeClass(this.get("itemHoverClass"))},focus:function(e){var i=e.target,n=this.get("autoFocusEle");if(n&&n.has(i)){var s=this;return void t(i).keyup(function(t){s.set("autoFocusEle",null),s.focus({target:i})})}this.getItem(i).removeClass(this.get("itemErrorClass")),this.getItem(i).addClass(this.get("itemFocusClass")),this.getExplain(i).html(t(i).attr("data-explain")||"")},blur:function(t){this.getItem(t.target).removeClass(this.get("itemFocusClass"))}});Hui.Validator=i}(jQuery),!function(t,e){function i(t,e){return function(){t.apply(e,arguments)}}function n(t,e){return t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t===e}function s(t){return t.charAt(0).toUpperCase()+t.substring(1)}var r=Hui.Base,a=/\bMSIE [6789]\.0\b/.test(navigator.userAgent),l={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},o=r.extend({attrs:{element:{value:null,setter:function(e){return t(e)}},query:null,delay:100},initialize:function(){o.superclass.initialize.apply(this,arguments),this._bindEvents(),this.set("query",this.getValue())},focus:function(){this.get("element").focus()},getValue:function(){return this.get("element").val()},setValue:function(t,e){this.get("element").val(t),!e&&this._change()},destroy:function(){o.superclass.destroy.call(this)},_bindEvents:function(){var t,e=this.get("element");if(e.attr("autocomplete","off").on("focus.autocomplete",i(this._handleFocus,this)).on("blur.autocomplete",i(this._handleBlur,this)).on("keydown.autocomplete",i(this._handleKeydown,this)),a){var n=this,s=["keydown.autocomplete","keypress.autocomplete","cut.autocomplete","paste.autocomplete"].join(" ");e.on(s,i(function(e){l[e.which]||(clearTimeout(t),t=setTimeout(function(){n._change.call(n,e)},this.get("delay")))},this))}else e.on("input.autocomplete",i(this._change,this))},_change:function(){var t=this.getValue(),e=this.get("query"),i=n(e,t),s=i?t.length!==e.length:!1;s&&this.trigger("whitespaceChanged",e),i||(this.set("query",t),this.trigger("queryChanged",t,e))},_handleFocus:function(t){this.trigger("focus",t)},_handleBlur:function(t){this.trigger("blur",t)},_handleKeydown:function(t){var e=l[t.which];if(e){var i="key"+s(e);this.trigger(t.type=i,t)}}});e.Input=o}(jQuery,Hui.AutoUtility=Hui.AutoUtility||{}),!function(t,e){function i(t){return(t||"").replace(r,"\\$1")}function n(t,e){for(var i=[],n=t.split(""),s=0,r=e.split(""),a=0,l=n.length;l>a;a++){var o=n[a];if(o===r[s]){if(s===r.length-1){i.push([a-r.length+1,a+1]),s=0;continue}s++}else s=0}return i}var s={"default":function(t){return t},startsWith:function(e,n){n=n||"";var s=[],r=n.length,a=new RegExp("^"+i(n));return r?(t.each(e,function(t,e){for(var i,n=[e.value].concat(e.alias);i=n.shift();)if(a.test(i)){e.label===i&&(e.highlightIndex=[[0,r]]),s.push(e);break}}),s):[]},stringMatch:function(e,i){i=i||"";var s=[],r=i.length;return r?(t.each(e,function(t,e){for(var r,a=[e.value].concat(e.alias);r=a.shift();)if(r.indexOf(i)>-1){e.label===r&&(e.highlightIndex=n(r,i)),s.push(e);break}}),s):[]}};e.Filter=s;var r=/(\[|\[|\]|\^|\$|\||\(|\)|\{|\}|\+|\*|\?|\\)/g}(jQuery,Hui.AutoUtility=Hui.AutoUtility||{}),!function(t,e){function i(t){return"[object String]"===Object.prototype.toString.call(t)}function n(t){return t.replace(/^([a-z])/,function(t,e){return e.toUpperCase()})}var s=Hui.Base,r=s.extend({attrs:{source:null,type:"array"},initialize:function(e){r.superclass.initialize.call(this,e),this.id=0,this.callbacks=[];var n=this.get("source");if(i(n))this.set("type","url");else if(t.isArray(n))this.set("type","array");else if(t.isPlainObject(n))this.set("type","object");else{if(!t.isFunction(n))throw new Error("Source Type Error");this.set("type","function")}},getData:function(t){return this["_get"+n(this.get("type")||"")+"Data"](t)},abort:function(){this.callbacks=[]},_done:function(t){this.trigger("data",t)},_getUrlData:function(e){var i,n=this,s={query:e?encodeURIComponent(e):"",timestamp:(new Date).getTime()},r=this.get("source").replace(/\{\{(.*?)\}\}/g,function(t,e){return s[e]}),a="callback_"+this.id++;this.callbacks.push(a),i=/^(https?:\/\/)/.test(r)?{dataType:"jsonp"}:{dataType:"json"},t.ajax(r,i).success(function(e){t.inArray(a,n.callbacks)>-1&&(delete n.callbacks[a],n._done(e))}).error(function(){t.inArray(a,n.callbacks)>-1&&(delete n.callbacks[a],n._done({}))})},_getArrayData:function(){var t=this.get("source");return this._done(t),t},_getObjectData:function(){var t=this.get("source");return this._done(t),t},_getFunctionData:function(t){function e(t){i._done(t)}var i=this,n=this.get("source"),s=n.call(this,t,e);s&&this._done(s)}});e.DataSource=r}(jQuery,Hui.AutoUtility=Hui.AutoUtility||{}),!function(t){function e(t){return"[object String]"===Object.prototype.toString.call(t)}function i(t){return"[object Object]"===Object.prototype.toString.call(t)}function n(i,n){if(i){if(t.isFunction(i))return i.call(this,n);if(!t.isArray(n)&&e(i)){for(var s=i.split("."),r=n;s.length;){var a=s.shift();if(!r[a])break;r=r[a]}return r}}return n}function s(n){var s=[];return t.each(n,function(t,n){if(e(n))s.push({label:n,value:n,alias:[]});else if(i(n)){if(!n.value&&!n.label)return;n.value||(n.value=n.label),n.label||(n.label=n.value),n.alias||(n.alias=[]),s.push(n)}}),s}function r(i,n){return e(i)?i=h[i]?h[i]:h["default"]:t.isFunction(i)||(i="url"===n.get("type")?h["default"]:h.startsWith),i}function a(t){function e(t){for(var e in t)i[e]=t[e]}var i={};return e(this),e(t.hash),t.fn(i)}function l(e){var i=this.highlightIndex,n=this.parent?this.parent.classPrefix:"",s=0,r=e||this.label||"",a="";if(t.isArray(i)){for(var l=0,o=i.length;o>l;l++){var u,c,h=i[l];if(t.isArray(h)?(u=h[0],c=h[1]-h[0]):(u=h,c=1),u>s&&(a+=r.substring(s,u)),u<r.length){var f=n?'class="'+n+'-item-hl"':"";a+="<span "+f+">"+r.substr(u,c)+"</span>"}if(s=u+c,s>=r.length)break}return r.length>s&&(a+=r.substring(s,r.length)),a}return r}var o=Hui.Overlay,u=Hui.Templatable,c=Hui.AutoUtility.DataSource,h=Hui.AutoUtility.Filter,f=Hui.AutoUtility.Input,g=/\bMSIE [678]\.0\b/.test(navigator.userAgent),d='<div class="{{classPrefix}}">                    <div class="{{classPrefix}}-content">                      {{> header}}                      <ul data-role="items">                      {{#each items}}                        <li data-role="item" class="{{../classPrefix}}-item">                          {{#include parent=.. }}{{> html}}{{/include}}                        </li>                      {{/each}}                      </ul>                      {{> footer}}                    </div>                  </div>',p=o.extend({Implements:u,attrs:{trigger:null,classPrefix:"ui-select",align:{baseXY:[0,"100%"]},submitOnEnter:!0,dataSource:{value:[],getter:function(e){var i=this;return t.isFunction(e)?function(){return e.apply(i,arguments)}:e}},locator:"data",filter:null,disabled:!1,selectFirst:!1,delay:100,model:{value:{items:[]},getter:function(t){return t.classPrefix||(t.classPrefix=this.get("classPrefix")),t}},template:d,footer:"",header:"",html:"{{{label}}}",selectedIndex:null,data:[]},events:{"mousedown [data-role=items]":"_handleMouseDown","click [data-role=item]":"_handleSelection","mouseenter [data-role=item]":"_handleMouseMove","mouseleave [data-role=item]":"_handleMouseMove"},templateHelpers:{highlightItem:l,include:a},parseElement:function(){var e=this;this.templatePartials||(this.templatePartials={}),t.each(["header","footer","html"],function(t,i){e.templatePartials[i]=e.get(i)}),p.superclass.parseElement.call(this)},setup:function(){p.superclass.setup.call(this),this._isOpen=!1,this._initInput(),this._initDataSource(),this._initFilter(),this._bindHandle(),this._blurHide([t(this.get("trigger"))]),this._tweakAlignDefaultValue(),this.on("indexChanged",function(t){var e=parseInt(this.get("height"),10);if(e){var i=this.items.parent().height()/this.items.length,n=Math.max(0,i*(t+1)-e);this.element.children().scrollTop(n)}})},show:function(){this._isOpen=!0,this._isEmpty()||p.superclass.show.call(this)},hide:function(){this._timeout&&clearTimeout(this._timeout),this.dataSource.abort(),this._hide()},destroy:function(){this._clear(),this.input&&(this.input.destroy(),this.input=null),p.superclass.destroy.call(this)},selectItem:function(t){this.items&&(t&&this.items.length>t&&t>=-1&&this.set("selectedIndex",t),this._handleSelection())},setInputValue:function(t){this.input.setValue(t)},_filterData:function(t){var e=this.get("filter"),i=this.get("locator");t=n(i,t),t=e.call(this,s(t),this.input.get("query")),this.set("data",t)},_onRenderData:function(t){t||(t=[]),this.set("model",{items:t,query:this.input.get("query"),length:t.length}),this.renderPartial(),this.items=this.$("[data-role=items]").children(),this.get("selectFirst")&&this.set("selectedIndex",0),this._isOpen&&this.show()},_onRenderSelectedIndex:function(t){var e=this.get("classPrefix")+"-item-hover";this.items&&this.items.removeClass(e),-1!==t&&(this.items.eq(t).addClass(e),this.trigger("indexChanged",t,this.lastIndex),this.lastIndex=t)},_initDataSource:function(){this.dataSource=new c({source:this.get("dataSource")})},_initInput:function(){this.input=new f({element:this.get("trigger"),delay:this.get("delay")})},_initFilter:function(){var t=this.get("filter");t=r(t,this.dataSource),this.set("filter",t)},_bindHandle:function(){this.dataSource.on("data",this._filterData,this),this.input.on("blur",this.hide,this).on("focus",this._handleFocus,this).on("keyEnter",this._handleSelection,this).on("keyEsc",this.hide,this).on("keyUp keyDown",this.show,this).on("keyUp keyDown",this._handleStep,this).on("queryChanged",this._clear,this).on("queryChanged",this._hide,this).on("queryChanged",this._handleQueryChange,this).on("queryChanged",this.show,this),this.after("hide",function(){this.set("selectedIndex",-1)}),this.on("itemSelected",function(){this._hide()})},_handleSelection:function(t){if(this.items){var e=t?"click"===t.type:!1,i=e?this.items.index(t.currentTarget):this.get("selectedIndex"),n=this.items.eq(i),s=this.get("data")[i];i>=0&&n&&s&&(this.input.setValue(s.label),this.set("selectedIndex",i,{silent:!0}),!t||e||this.get("submitOnEnter")||t.preventDefault(),this.trigger("itemSelected",s,n))}},_handleFocus:function(){this._isOpen=!0},_handleMouseMove:function(t){var e=this.get("classPrefix")+"-item-hover";if(this.items.removeClass(e),"mouseenter"===t.type){var i=this.items.index(t.currentTarget);this.set("selectedIndex",i,{silent:!0}),this.items.eq(i).addClass(e)}},_handleMouseDown:function(t){if(g){var e=this.input.get("element")[0];e.onbeforedeactivate=function(){window.event.returnValue=!1,e.onbeforedeactivate=null}}t.preventDefault()},_handleStep:function(t){t.preventDefault(),this.get("visible")&&this._step("keyUp"===t.type?-1:1)},_handleQueryChange:function(t,e){this.get("disabled")||(this.dataSource.abort(),this.dataSource.getData(t))},_step:function(t){var e=this.get("selectedIndex");-1===t?e>-1?this.set("selectedIndex",e-1):this.set("selectedIndex",this.items.length-1):1===t&&(e<this.items.length-1?this.set("selectedIndex",e+1):this.set("selectedIndex",-1))},_clear:function(){this.$("[data-role=items]").empty(),this.set("selectedIndex",-1),delete this.items,delete this.lastIndex},_hide:function(){this._isOpen=!1,p.superclass.hide.call(this)},_isEmpty:function(){var t=this.get("data");return!(t&&t.length>0)},_tweakAlignDefaultValue:function(){var t=this.get("align");t.baseElement=this.get("trigger"),this.set("align",t)}});Hui.AutoComplete=p}(jQuery);