var Hui=Hui||{};!function(e){"use strict";function t(t){t=o(t)||{},t.nodeType&&(t={element:t});var i=o(t.element)||h;if(1!==i.nodeType)throw new Error("posObject.element is invalid.");var n={element:i,x:t.x||0,y:t.y||0},s=i===h||"VIEWPORT"===i._id;return n.offset=function(){return c?{left:0,top:0}:s?{left:e(document).scrollLeft(),top:e(document).scrollTop()}:a(e(i)[0])},n.size=function(){var t=e(s?window:i);return{width:t.outerWidth(),height:t.outerHeight()}},n}function i(e){e.x=n(e.x,e,"width"),e.y=n(e.y,e,"height")}function n(e,t,i){if(e+="",e=e.replace(/px/gi,""),/\D/.test(e)&&(e=e.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==e.indexOf("%")&&(e=e.replace(/(\d+(?:\.\d+)?)%/gi,function(e,n){return t.size()[i]*(n/100)})),/[+\-*\/]/.test(e))try{e=new Function("return "+e)()}catch(n){throw new Error("Invalid position value: "+e)}return r(e)}function s(t){var i=t.offsetParent();i[0]===document.documentElement&&(i=e(document.body)),f&&i.css("zoom",1);var n;return n=i[0]===document.body&&"static"===i.css("position")?{top:0,left:0}:a(i[0]),n.top+=r(i.css("border-top-width")),n.left+=r(i.css("border-left-width")),n}function r(e){return parseFloat(e,10)||0}function o(t){return e(t)[0]}function a(e){var t=e.getBoundingClientRect(),i=document.documentElement;return{left:t.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||i.scrollTop)-(i.clientTop||document.body.clientTop||0)}}var l=Hui.Position={},h={_id:"VIEWPORT",nodeType:1},c=!1,u=(window.navigator.userAgent||"").toLowerCase(),f=-1!==u.indexOf("msie 6");l.pin=function(n,r){if(n=t(n),r=t(r),n.element!==h&&"VIEWPORT"!==n.element._id){var o=e(n.element);"fixed"!==o.css("position")||f?(o.css("position","absolute"),c=!1):c=!0,i(n),i(r);var a=s(o),l=r.offset(),u=l.top+r.y-n.y-a.top,d=l.left+r.x-n.x-a.left;o.css({left:d,top:u})}},l.center=function(e,t){l.pin({element:e,x:"50%",y:"50%"},{element:t,x:"50%",y:"50%"})},l.VIEWPORT=h}(jQuery);var Hui=Hui||{};!function(e){"use strict";function t(t){this.target=e(t).eq(0)}function i(){}function n(t){var i={display:"none",border:"none",opacity:0,position:"absolute"},n=t.css("zIndex");return n&&n>0&&(i.zIndex=n-1),e("<iframe>",{src:"javascript:''",frameborder:0,css:i}).insertBefore(t)}var s=Hui.Position,r=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6");t.prototype.sync=function(){var e=this.target,t=this.iframe;if(!e.length)return this;var i=e.outerHeight(),r=e.outerWidth();return i&&r&&!e.is(":hidden")?(t||(t=this.iframe=n(e)),t.css({height:i,width:r}),s.pin(t[0],e[0]),t.show()):t&&t.hide(),this},t.prototype.destroy=function(){this.iframe&&(this.iframe.remove(),delete this.iframe),delete this.target},r?Hui.Shim=t:(i.prototype.sync=function(){return this},i.prototype.destroy=i,Hui.Shim=i)}(jQuery);var Hui=Hui||{};Hui.Messenger=function(){"use strict";function e(e,t){var i="";if(arguments.length<2?i="target error - target and name are both required":"object"!=typeof e?i="target error - target itself must be window object":"string"!=typeof t&&(i="target error - target name must be string type"),i)throw new Error(i);this.target=e,this.name=t}function t(e,t){this.targets={},this.name=e,this.listenFunc=[],i=t||i,this.initListen()}var i="arale-messenger",n="postMessage"in window;return n?e.prototype.send=function(e){this.target.postMessage(i+e,"*")}:e.prototype.send=function(e){var t=window.navigator[i+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(i+e,window)},t.prototype.addTarget=function(t,i){var n=new e(t,i);this.targets[i]=n},t.prototype.initListen=function(){var e=this,t=function(t){"object"==typeof t&&t.data&&(t=t.data),t=t.slice(i.length);for(var n=0;n<e.listenFunc.length;n++)e.listenFunc[n](t)};n?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[i+this.name]=t},t.prototype.listen=function(e){this.listenFunc.push(e)},t.prototype.clear=function(){this.listenFunc=[]},t.prototype.send=function(e){var t,i=this.targets;for(t in i)i.hasOwnProperty(t)&&i[t].send(e)},t}();var Hui=Hui||{};!function(e,t){"use strict";function i(t){return o(t)?null:e(s(t))}function n(e,t){if(e){var i;if(t){if(i=e.find(t),0===i.length)throw new Error("Invalid template selector: "+t)}else i=e;return r(i.html())}}function s(e){return e.replace(/({[^}]+}})/g,"<!--$1-->").replace(/\s(src|href)\s*=\s*(['"])(.*?\{.+?)\2/g," data-templatable-$1=$2$3$2")}function r(e){return e.replace(/(?:<|&lt;)!--({{[^}]+}})--(?:>|&gt;)/g,"$1").replace(/data-templatable-/gi,"")}function o(e){return"function"==typeof e}function a(e){if(!e)return{};var i={};for(var n in e){var s=e[n];i[n]=o(s)?s:t.compile(s)}return i}var l={};Hui.Templatable={templateHelpers:null,templatePartials:null,templateObject:null,parseElementFromTemplate:function(){var t,n=this.get("template");/^#/.test(n)&&(t=document.getElementById(n.substring(1)))&&(n=t.innerHTML,this.set("template",n)),this.templateObject=i(n),this.element=e(this.compile())},compile:function(e,i){if(e||(e=this.get("template")),i||(i=this.get("model"))||(i={}),i.toJSON&&(i=i.toJSON()),o(e))return e(i,{helpers:this.templateHelpers,partials:a(this.templatePartials)});var n,s,r=this.templateHelpers,h=this.templatePartials;if(r)for(n in r)r.hasOwnProperty(n)&&t.registerHelper(n,r[n]);if(h)for(s in h)h.hasOwnProperty(s)&&t.registerPartial(s,h[s]);var c=l[e];c||(c=l[e]=t.compile(e));var u=c(i);if(r)for(n in r)r.hasOwnProperty(n)&&delete t.helpers[n];if(h)for(s in h)h.hasOwnProperty(s)&&delete t.partials[s];return u},renderPartial:function(t){if(this.templateObject){var i=n(this.templateObject,t);i?t?this.$(t).html(this.compile(i)):this.element.html(this.compile(i)):this.element.html(this.compile())}else{var s=e(this.compile()),r=s.find(t);r.length?this.$(t).html(r.html()):this.element.html(s.html())}return this}};var h=t.compile;t.compile=function(e){return o(e)?e:h.call(t,e)}}(jQuery,Handlebars);var Hui=Hui||{};!function(e){function t(t){return e.contains(document.documentElement,t)}function i(t){e(a.blurOverlays).each(function(i,n){if(n&&n.get("visible")){for(var s=0;s<n._relativeElements.length;s++){var r=e(n._relativeElements[s])[0];if(r===t.target||e.contains(r,t.target))return}n.hide()}})}function n(e,t){for(var i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),t}var s=Hui.Position,r=Hui.Shim,o=Hui.Widget,a=o.extend({attrs:{width:null,height:null,zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:s.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var e=this;this._setupShim(),this._setupResize(),this.after("render",function(){var e=this.element.css("position");("static"===e||"relative"===e)&&this.element.css({position:"absolute",left:"-9999px",top:"-9999px"})}),this.after("show",function(){e._setPosition()})},destroy:function(){return n(this,a.allOverlays),n(this,a.blurOverlays),a.superclass.destroy.call(this)},_setPosition:function(e){if(t(this.element[0])&&(e||(e=this.get("align")),e)){var i="none"===this.element.css("display");return i&&this.element.css({visibility:"hidden",display:"block"}),s.pin({element:this.element,x:e.selfXY[0],y:e.selfXY[1]},{element:e.baseElement,x:e.baseXY[0],y:e.baseXY[1]}),i&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var e=new r(this.element);this.after("hide _setPosition",e.sync,e);var t=["width","height"];for(var i in t)t.hasOwnProperty(i)&&this.on("change:"+i,e.sync,e);this.before("destroy",e.destroy,e)},_setupResize:function(){a.allOverlays.push(this)},_blurHide:function(t){t=e.makeArray(t),t.push(this.element),this._relativeElements=t,a.blurOverlays.push(this)},_onRenderWidth:function(e){this.element.css("width",e)},_onRenderHeight:function(e){this.element.css("height",e)},_onRenderZIndex:function(e){this.element.css("zIndex",e)},_onRenderAlign:function(e){this._setPosition(e)},_onRenderVisible:function(e){this.element[e?"show":"hide"]()}});a.blurOverlays=[],e(document).on("click",function(e){i(e)});var l,h=e(window).width(),c=e(window).height();a.allOverlays=[],e(window).resize(function(){l&&clearTimeout(l),l=setTimeout(function(){var t=e(window).width(),i=e(window).height();(h!==t||c!==i)&&e(a.allOverlays).each(function(e,t){t&&t.get("visible")&&t._setPosition()}),h=t,c=i},80)}),Hui.Overlay=a}(jQuery);var Hui=Hui||{};!function(e){"use strict";var t=Hui.Overlay,i=(window.navigator.userAgent||"").toLowerCase(),n=-1!==i.indexOf("msie 6"),s=e(document.body),r=e(document),o=t.extend({attrs:{width:n?r.outerWidth(!0):"100%",height:n?r.outerHeight(!0):"100%",className:"ui-mask",opacity:.2,backgroundColor:"#000",style:{position:n?"absolute":"fixed",top:0,left:0},align:{baseElement:n?s:void 0}},show:function(){return n&&(this.set("width",r.outerWidth(!0)),this.set("height",r.outerHeight(!0))),o.superclass.show.call(this)},_onRenderBackgroundColor:function(e){this.element.css("backgroundColor",e)},_onRenderOpacity:function(e){this.element.css("opacity",e)}});Hui.Mask=new o}(jQuery);var Hui=Hui||{};!function(e){"use strict";function t(e,t,i,n,s){var r=n&&n[0];s.delegateEvents(r?n:t,r?e+" "+t.selector:e,function(e){i.call(e.currentTarget,e)})}var i=Hui.Overlay,n=i.extend({attrs:{trigger:{value:null,getter:function(t){return e(t)}},triggerType:"hover",delegateNode:{value:null,getter:function(t){return e(t)}},align:{value:{baseXY:[0,"100%"],selfXY:[0,0]},setter:function(e){return e?(e.baseElement?this._specifiedBaseElement=!0:this.activeTrigger&&(e.baseElement=this.activeTrigger),e):void 0},getter:function(t){return e.extend({},t,this._specifiedBaseElement?{}:{baseElement:this.activeTrigger})}},delay:70,disabled:!1,effect:"",duration:250},setup:function(){n.superclass.setup.call(this),this._bindTrigger(),this._blurHide(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0);var e=this;this.get("delegateNode")&&this.before("show",function(){e._relativeElements=e.get("trigger"),e._relativeElements.push(e.element)})},render:function(){return n.superclass.render.call(this),this.element.hide(),this},show:function(){return this.get("disabled")?void 0:n.superclass.show.call(this)},hide:function(e){return e?this:n.superclass.hide.call(this)},_bindTrigger:function(){var e=this.get("triggerType");"click"===e?this._bindClick():"focus"===e?this._bindFocus():this._bindHover()},_bindClick:function(){function i(t){n.get("disabled")||n.get("trigger").each(function(i,s){t==s?(s._active=!0,n.activeTrigger=e(s)):s._active=!1})}var n=this;t("click",this.get("trigger"),function(e){this._active===!0?n.hide():(i(this),n.show())},this.get("delegateNode"),this),this.before("hide",function(){i()})},_bindFocus:function(){var i=this;t("focus",this.get("trigger"),function(){i.activeTrigger=e(this),i.show()},this.get("delegateNode"),this),t("blur",this.get("trigger"),function(){setTimeout(function(){!i._downOnElement&&i.hide(),i._downOnElement=!1},i.get("delay"))},this.get("delegateNode"),this),this.delegateEvents("mousedown",function(e){this._downOnElement=!0})},_bindHover:function(){function i(e){clearTimeout(n),n=null,l.get("visible")&&(s=setTimeout(function(){l.hide()},a))}var n,s,r=this.get("trigger"),o=this.get("delegateNode"),a=this.get("delay"),l=this;return 0>a?void this._bindTooltip():(t("mouseenter",r,function(){clearTimeout(s),s=null,l.activeTrigger=e(this),n=setTimeout(function(){l.show()},a)},o,this),t("mouseleave",r,i,o,this),this.delegateEvents("mouseenter",function(){clearTimeout(s)}),this.delegateEvents("mouseleave",i),void this.element.on("mouseleave","select",function(e){e.stopPropagation()}))},_bindTooltip:function(){var i=this.get("trigger"),n=this.get("delegateNode"),s=this;t("mouseenter",i,function(){s.activeTrigger=e(this),s.show()},n,this),t("mouseleave",i,function(){s.hide()},n,this)},_onRenderVisible:function(e,t){if(e!==!!t){var i=-1!==this.get("effect").indexOf("fade"),n=-1!==this.get("effect").indexOf("slide"),s={};n&&(s.height=e?"show":"hide"),i&&(s.opacity=e?"show":"hide");var r=this,o=e?function(){r.trigger("animated")}:function(){r.hide(!0),r.trigger("animated")};i||n?this.element.stop(!0,!0).animate(s,this.get("duration"),o).css({visibility:"visible"}):this.element[e?"show":"hide"]()}}});Hui.Popup=n}(jQuery);var Hui=Hui||{};!function(e){"use strict";function t(e){null==e.attr("tabindex")&&e.attr("tabindex","-1")}function i(e){var t=e[0].contentWindow.document;return t.body.scrollHeight&&t.documentElement.scrollHeight?Math.min(t.body.scrollHeight,t.documentElement.scrollHeight):t.documentElement.scrollHeight?t.documentElement.scrollHeight:t.body.scrollHeight?t.body.scrollHeight:void 0}function n(e){var t=!1;try{e[0].contentWindow.document}catch(i){t=!0}return t}function s(e,t){for(var i=-1,n=0;n<t.length;n++)if(t[n]===e){i=n;break}-1!==i&&t.splice(i,1)}var r=Hui.Overlay,o=Hui.Mask,a=Hui.Events,l=Hui.Templatable,h=Hui.Messenger,c=r.extend({Implements:l,attrs:{template:'<div class="{{classPrefix}}">                  <a class="{{classPrefix}}-close" title="Close" href="javascript:;" data-role="close"></a>                  <div class="{{classPrefix}}-content" data-role="content"></div>                </div>',trigger:{value:null,getter:function(t){return e(t)}},classPrefix:"ui-dialog",content:{value:null,setter:function(e){return/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(e)&&(this._type="iframe",(e.indexOf("?ajax")>0||e.indexOf("&ajax")>0)&&(this._ajax=!0)),e}},hasMask:!0,closeTpl:"×",width:500,height:null,initialHeight:300,effect:"none",zIndex:999,autoFit:!0,align:{value:{selfXY:["50%","50%"],baseXY:["50%","42%"]},getter:function(t){return this.element.height()>.84*e(window).height()?{selfXY:["50%","0"],baseXY:["50%","0"]}:t}}},parseElement:function(){this.set("model",{classPrefix:this.get("classPrefix")}),c.superclass.parseElement.call(this),this.contentElement=this.$("[data-role=content]"),this.contentElement.css({height:"100%",zoom:1}),this.$(">[data-role=close]").hide()},events:{"click [data-role=close]":function(e){e.preventDefault(),this.hide()}},show:function(){return"iframe"===this._type&&(this._ajax?this._ajaxHtml():(!this.get("height")&&this.contentElement.css("height",this.get("initialHeight")),this._showIframe())),c.superclass.show.call(this),this},hide:function(){return"iframe"===this._type&&this.iframe&&(this._isCrossDomainIframe||this.iframe.attr({src:"javascript:'';"}),this.iframe.remove(),this.iframe=null),c.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.element.remove(),this._hideMask(),clearInterval(this._interval),c.superclass.destroy.call(this)},setup:function(){c.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),t(this.element),t(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},_onRenderContent:function(t){if("iframe"!==this._type){var i;try{i=e(t)}catch(n){i=[]}i[0]?this.contentElement.empty().append(i):this.contentElement.empty().html(t),this._setPosition()}},_onRenderCloseTpl:function(e){""===e?this.$(">[data-role=close]").html(e).hide():this.$(">[data-role=close]").html(e).show()},_onRenderVisible:function(e){e?"fade"===this.get("effect")?this.element.fadeIn(300):this.element.show():this.element.hide()},_setupTrigger:function(){this.delegateEvents(this.get("trigger"),"click",function(t){t.preventDefault(),this.activeTrigger=e(t.currentTarget),this.show()})},_setupMask:function(){var e=this;o._dialogs=o._dialogs||[],this.after("show",function(){if(this.get("hasMask")){o.set("zIndex",e.get("zIndex")).show(),o.element.insertBefore(e.element);for(var t,i=0;i<o._dialogs.length;i++)o._dialogs[i]===e&&(t=o._dialogs[i]);t?(s(t,o._dialogs),o._dialogs.push(t)):o._dialogs.push(e)}}),this.after("hide",this._hideMask)},_hideMask:function(){if(this.get("hasMask"))for(var e=o._dialogs?o._dialogs.length:0,t=0;e>t;t++)if(o._dialogs[t]===this)if(s(this,o._dialogs),0===o._dialogs.length)o.hide();else if(t===e-1){var i=o._dialogs[o._dialogs.length-1];o.set("zIndex",i.get("zIndex")),o.element.insertBefore(i.element)}},_setupFocus:function(){this.after("show",function(){this.element.focus()}),this.after("hide",function(){this.activeTrigger&&this.activeTrigger.focus()})},_setupKeyEvents:function(){this.delegateEvents(e(document),"keyup.esc",function(e){27===e.keyCode&&this.get("visible")&&this.hide()})},_showIframe:function(){var e=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){e.get("visible")&&(e._isCrossDomainIframe=n(e.iframe),e._isCrossDomainIframe||(e.get("autoFit")&&(clearInterval(e._interval),e._interval=setInterval(function(){e._syncHeight()},300)),e._syncHeight()),e._setPosition(),e.trigger("complete:show"))})},_fixUrl:function(){var e=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return e.shift(),e[1]=(e[1]&&"?"!==e[1]?e[1]+"&":"?")+"t="+(new Date).getTime(),e.join("")},_createIframe:function(){var t=this;this.iframe=e("<iframe>",{src:"javascript:'';",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),a.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){t.hide()});var i=new h("parent","arale-dialog");this.iframe.one("load",function(){i.addTarget(t.iframe[0].contentWindow,"iframe1"),i.listen(function(e){switch(e=JSON.parse(e),e.event){case"close":t.hide();break;case"syncHeight":t._setHeight("px"===e.height.toString().slice(-2)?e.height:e.height+"px")}})})},_setHeight:function(e){this.contentElement.css("height",e),this.element[0].className=this.element[0].className},_syncHeight:function(){var e;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{this._errCount=0,e=i(this.iframe)+"px"}catch(t){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(e=this.get("initialHeight"),clearInterval(this._interval),delete this._interval)}this._setHeight(e)}},_ajaxHtml:function(){var e=this;this.contentElement.css("height",this.get("initialHeight")),this.contentElement.load(this.get("content"),function(){e._setPosition(),e.contentElement.css("height",""),e.trigger("complete:show")})}});Hui.Dialog=c}(jQuery);var Hui=Hui||{};!function(e){"use strict";var t=Hui.Dialog,i='{{#if title}}<div class="{{classPrefix}}-title" data-role="title">{{{title}}}</div>{{/if}}<div class="{{classPrefix}}-container">    <div class="{{classPrefix}}-message" data-role="message">{{{message}}}</div>    {{#if hasFoot}}    <div class="{{classPrefix}}-operation" data-role="foot">        {{#if confirmTpl}}        <div class="{{classPrefix}}-confirm" data-role="confirm">            {{{confirmTpl}}}        </div>        {{/if}}        {{#if cancelTpl}}        <div class="{{classPrefix}}-cancel" data-role="cancel">            {{{cancelTpl}}}        </div>        {{/if}}    </div>    {{/if}}</div>',n=t.extend({attrs:{title:"默认标题",confirmTpl:'<a class="ui-dialog-button-orange" href="javascript:;">确定</a>',cancelTpl:'<a class="ui-dialog-button-white" href="javascript:;">取消</a>',message:"默认内容"},setup:function(){n.superclass.setup.call(this);var e={classPrefix:this.get("classPrefix"),message:this.get("message"),title:this.get("title"),confirmTpl:this.get("confirmTpl"),cancelTpl:this.get("cancelTpl"),hasFoot:this.get("confirmTpl")||this.get("cancelTpl")};this.set("content",this.compile(i,e))},events:{"click [data-role=confirm]":function(e){e.preventDefault(),this.trigger("confirm")},"click [data-role=cancel]":function(e){e.preventDefault(),this.trigger("cancel"),this.hide()}},_onChangeMessage:function(e){this.$("[data-role=message]").html(e)},_onChangeTitle:function(e){this.$("[data-role=title]").html(e)},_onChangeConfirmTpl:function(e){this.$("[data-role=confirm]").html(e)},_onChangeCancelTpl:function(e){this.$("[data-role=cancel]").html(e)}});n.alert=function(t,i,s){var r={message:t,title:"",cancelTpl:"",closeTpl:"",onConfirm:function(){i&&i(),this.hide()}};new n(e.extend(null,r,s)).show().after("hide",function(){this.destroy()})},n.confirm=function(t,i,s,r,o){"object"!=typeof r||o||(o=r,r=null);var a={message:t,title:i||"确认框",closeTpl:"",onConfirm:function(){s&&s(),this.hide()},onCancel:function(){r&&r(),this.hide()}};new n(e.extend(null,a,o)).show().after("hide",function(){this.destroy()})},n.show=function(t,i,s){var r={message:t,title:"",confirmTpl:!1,cancelTpl:!1};new n(e.extend(null,r,s)).show().before("hide",function(){i&&i()}).after("hide",function(){this.destroy()})},Hui.ConfirmBox=n}(jQuery);